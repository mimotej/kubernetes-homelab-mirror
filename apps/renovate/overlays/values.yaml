image:
  tag: 43.15.1
cronjob:
  activeDeadlineSeconds: 3600
  completions: 1
  concurrencyPolicy: Forbid
  failedJobsHistoryLimit: 3
  schedule: "0 */2 * * *"
  timeZone: "Europe/Prague"
env:
  - name: LOG_LEVEL
    value: debug
  - name: RENOVATE_BASE_DIR
    value: '/tmp/renovate/'
  - name: RENOVATE_CONFIG_FILE
    value: '/opt/renovate/config.json'
envFrom:
  - secretRef:
      name: renovate-env
extraVolumeMounts:
  - name: work-volume
    mountPath: /tmp/renovate
extraVolumes:
  - name: work-volume
    emptyDir: {}
renovate:
  config: |-
      {
        $schema: 'https://docs.renovatebot.com/renovate-schema.json',
        extends: [
       'config:recommended',
        ],
        "repositories": ["mimotej/kubernetes-homelab-mirror"],
        "packageRules": [
          {
            "enabled": true,
            "matchDatasources": [
              "docker"
            ],
            "matchUpdateTypes": [
              "major"
            ]
          },
          {
            "matchDatasources": ["helm"],
            "commitMessageTopic": "chart {{depName}}"
          },
          {
            "matchDatasources": ["docker"],
            "commitMessageTopic": "image {{depName}}"
          }
        ],
        "argocd": {
            "fileMatch": ["/apps/.+\\.ya?ml$"]
        },
        'helm-values': {
          managerFilePatterns: [
            '/apps/.+\\.ya?ml$/',
          ],
        },
        kubernetes: {
         // Directories with Kubernetes manifests
         managerFilePatterns: [
           '/apps/.+\\.ya?ml$/',
         ],
        },
        // Title for the Dependency Dashboard Issue
        dependencyDashboardTitle: 'Renovate Dashboard ðŸ¤–',
        "enabledManagers": [
          "argocd",
          "dockerfile",
          "github-actions",
          "kustomize",
          "kubernetes",
          "helmv3",
          "helm-values",
        ],
      }

